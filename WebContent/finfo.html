<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flight-Information</title>
  <link rel="stylesheet" href="./CSS/reset.css">
  <link rel="stylesheet" href="./CSS/base.css">
  <link rel="stylesheet" href="./CSS/flght-information.css">
  <link rel="stylesheet" href="./../fontawesome/css/all.css">
  <link rel="shortcut icon" href="./img/icon.png" type="image/x-icon">
  <link rel="stylesheet" href="./font/iconfont.css">
</head>
<script>
  window.onload = () => {
    // var input = document.getElementById('1');
    var inputlist = document.getElementsByTagName('input');
    var showcitylist = document.getElementById('showcitylist');
    var tocitylist = document.getElementById('tocitylist');
    var frominput = inputlist[0];
    var toinput = inputlist[1];
    var val = null;
    var clearIT = null;
    var citystr =
      '北京首都国际机场 PEK beijing  上海浦东国际机场 PVG shanghai  广州白云国际机场 CAN guangzhou  上海虹桥国际机场 SHA 上海  深圳宝安国际机场 SZX 广东深圳  成都双流国际机场 CTU 四川成都  昆明巫家坝国际机场 KMG 云南昆明  海口美兰机场 HAK 海南海口  西安咸阳国际机场 SIA xian  杭州萧山国际机场 HGH 浙江杭州  厦门高崎国际机场 XMN 福建厦门  重庆江北国际机场 CKG 重庆  青岛流亭机场 TAO 山东青岛  大连周水子国际机场 DLC 辽宁大连  南京禄口国际机场 NKG 江苏南京  武汉天河机场 WUH 湖北武汉  沈阳桃仙国际机场 SHE 辽宁沈阳  乌鲁木齐地窝堡国际机场 URC 新疆乌鲁木齐  长沙黄花国际机场 CSX 湖北长沙  福州长乐国际机场 FOC 福建福州  桂林两江机场 KWL 广西桂林  哈尔滨太平国际机场 HRB 黑龙江哈尔滨  贵阳龙洞堡机场 KWE 贵州贵阳  郑州新郑国际机场 CGO 河南郑州  三亚凤凰机场 SYX 海南三亚  温州永强机场 WNZ 浙江温州  济南遥墙机场 TNA 山东济南  宁波栎社机场 NGB 浙江宁波  天津滨海国际机场 TSN 天津  太原武宿机场 TYN 山西太原  南宁吴圩机场 NNG 广西南宁  南昌昌北机场 KHN 江西南昌  长春大房身机场 CGQ 吉林长春  张家界荷花机场 DYG 湖南张家界  合肥骆岗机场 HFE 安徽合肥  西双版纳嘎洒机场 JHG 云南西双版纳  泉州晋江机场 JJN 福建晋江  兰州中川机场 LHW 甘肃兰州  烟台莱山机场 YNT 山东烟台  九寨黄龙机场 JZH 四川九寨沟  丽江三义机场 LJG 云南丽江  汕头外砂机场 SWA 广东汕头  呼和浩特据白塔机场 HET 内蒙古呼和浩特  拉萨贡嘎机场 LXA 西藏拉萨  珠海三灶机场 ZUH 广东珠海  银川河东机场 INC 宁夏银川  延吉朝阳川机场 YNJ 吉林延吉  武夷山机场 WUS 福建武夷山  西宁曹家堡机场 XNN 青海西宁  湛江机场 ZHA 广东湛江  舟山机场 HSN 浙江舟山  黄山屯溪机场 TXN 安徽黄山  宜昌三峡机场 YIH 湖北宜昌  喀什机场 KHG 新疆喀什  包头二里半机场 BAV 内蒙古包头  伊宁机场 YIN 新疆伊宁  大理机场 DLU 云南大理  北海福成机场 BHY 广西北海  石家庄正定机场 SJW 河北石家庄  常州奔牛机场 CZX 江苏常州  库尔勒机场 KRL 新疆库尔勒  黄岩路桥机场 HYN 浙江黄岩  义乌机场 YIW 浙江义乌  攀枝花保安营机场 PZI 四川攀枝花  敦煌机场 DNH 甘肃敦煌  阿勒泰机场 AAT 新疆阿勒泰  绵阳南郊机场 MIG 四川绵阳  牡丹江海浪机场 MDG 黑龙江牡丹江  徐州观音机场 XUZ 江苏徐州  宜宾莱坝机场 YBP 四川宜宾  威海机场 WEH 山东威海  西昌青山机场 XIC 四川西昌  柳州白莲机场 LZH 广西柳州  海拉尔东山机场 HLD 内蒙古海拉尔  阿克苏机场 AKU 新疆阿克苏  景德镇机场 JDZ 江西景德镇  连云港白塔埠机场 LYG 江苏连云港  南通兴东机场 NTG 江苏南通  泸州蓝田机场 LZO 四川泸州  和田机场 HTN 新疆和田  榆林西沙机场 UYN 陕西榆林  洛阳北郊机场 LYA 河南洛阳  临沧机场 LNJ 云南临沧  铜仁大兴机场 TEN 贵州铜仁  常德桃花源机场 CGD 湖南常德  保山机场 BSD 云南保山  临沂机场 LYI 山东临沂  佳木斯东郊机场 JMU 黑龙江佳木斯  长治王村机场 CIH 山西长治  梅县机场 MXZ 广东梅县  齐齐哈尔三家子机场 NDG 黑龙江齐齐哈尔  汉中机场 HZG 陕西汉中  赣州黄金机场 KOW 江西赣州  塔城机场 TCG 新疆塔城  延安二十里堡机场 ENY 陕西延安  潍坊机场 WEF 山东潍坊  库车机场 KCA 新疆库车  丹东浪头机场 DDG 辽宁丹东  赤峰机场 CIF 内蒙古赤峰  吉林二台子机场 JIL 吉林吉林  南阳姜营机场 NNY 河南南阳  盐城机场 YNZ 江苏盐城  嘉峪关机场 JGN 甘肃嘉峪关  思茅机场 SYM 云南思茅  秦皇岛山海关机场 SHP 河北秦皇岛  锡林浩特机场 XIL 内蒙古锡林浩特  锦州小领子机场 JNZ 辽宁锦州  乌兰浩特机场 HLH 内蒙古乌兰浩特  通辽机场 TGO 内蒙古通辽  东营机场 DOY 山东东营  乌海机场 WUA 内蒙古乌海  衢州机场 JUZ 浙江衢州  连城机场 LCX 福建连城  阜阳机场 FIG 安徽阜阳  安庆机场 AQG 安徽安庆  且末机场 IQM 新疆且末'
    var i = 0;
    var cityarr = [];
    while (citystr.match(/\s/g)) {
      citystr = citystr.replace(' ', ',');
      citystr = citystr.replace(' ', ',');
      citystr = citystr.replace('  ', ',');
    }
    citystr = citystr.split(',');
    for (let i = 0; i < citystr.length / 3; i++) {
      cityarr[i] = {
        airport: citystr[3 * i],
        TW: citystr[3 * i + 1],
        city: citystr[3 * i + 2],
        show: false
      }
    }
    frominput.onfocus = function(){inputfous(frominput);} 
    frominput.onblur = function(){inputblur(frominput);}
    toinput.onfocus = function(){inputfous(toinput);}
    toinput.onblur = function(){inputblur(toinput);}
    //  模糊搜索函数
    function searchinput(info, event) {
      var id = event.id;

      if(id == 1){showcitylist = document.getElementById('fromcitylist');} else if(id == '2'){showcitylist = document.getElementById('tocitylist');}
      
      if (info) {
        var meg = new RegExp(info);
        var cityinfo = {};
        for (let i = 0; i < cityarr.length; i++) {
          cityinfo = cityarr[i];
          if (cityinfo.city.match(meg) && cityinfo.show !== true) {
            var node = document.createElement('li');
            node.id = cityinfo.city;
            var nid = node.id;
            (function(nid){node.onmousedown = function () {lifous(nid,id);}})(nid,id);
            // node.onmousedown = function () {lifous(node.id);}
            node.textContent = cityinfo.city;
            showcitylist.appendChild(node);
            cityinfo.show = true;
          }
          if(cityinfo.show == true && !cityinfo.city.match(meg)) {
            cityinfo.show = false;
            for(let i=0; i<showcitylist.childNodes.length ;i++){
              if(cityinfo.city == showcitylist.childNodes[i].innerHTML){
                showcitylist.removeChild(showcitylist.childNodes[i]);
              }
            }
          } 
        }
      } else {
        clearinput(event);
      }
    }

    function clearinput(event) {
      var id = event.id;

      if(id == '1'){fromcitylist.innerHTML = '';} else if(id == '2'){tocitylist.innerHTML = '';}
      
      for (let i = 0; i < cityarr.length; i++) {
        cityarr[i].show = false;
      }
    }

    function inputfous(event) {
      clearIT = setInterval(() => {
      val = event.value;
      searchinput(val,event);
      }, 10);
    }

    function inputblur(event) {
      clearInterval(clearIT);
      clearinput(event);
    }

    function lifous (node,id) {
      var input = null;
      
      if(id == 1){input = document.getElementById('1');} else if(id == '2'){input = document.getElementById('2');}

      input.value = node;
    }
  }
</script>
<style>
  .showfromcity,
  .showtocity {
    display: block;
    background: #fff;
    width: 269px;
    position: relative;
    z-index: 999999;
  }
  .showtocity{
    transform: translateX(274px);
  }
  .showfromcity li,
  .showtocity li {
    height: 40px;
    line-height: 40px;
    padding-left: 16px;
    font-size: 15px;
    color: rgb(25, 28, 36);
    font-weight: 600;
    font-family: Arial;
  }
</style>

<body>
  <div class="topbar-warrper">
    <div class="topbar w">
      <ul class="leftbar">
        <li><a class="logo" href="javascript:;">WeFly <i class="fas fa-plane"></i></a></li>
        <li><a class="flights" href="javascript:;">Flights</a></li>
        <!-- <li><a href="javascript:;">Stays</a></li> -->
      </ul>
      <ul class="usersection">
        <li><a class="sign-in" href="./login.html   "><i class="fas fa-user"></i>Sign in</a></li>
        <li><a class="sign-in" href="./register.html"><i class="fas fa-user"></i>Register</a></li>
        <li></i><a href="javascript:;"><i class="fas fa-flag"></i>CN￥</a></li>
      </ul>
    </div>
  </div>
  <div class="main">
    <div class="searchline-warpper">
      <div class="searchline">
        <form action="#" class="searchline" method="POST" autocomplete="off" id="sreachform">
          <input type="text" name="from" id="1" placeholder="From" class="from">
          <input type="text" name="to" id="2" placeholder="To" class="to">
          <input type="date" name="date" id="3" value="2021-07-20">
          <a href="reserve.jsp?id=1&name=from,id=2&name=to,id=3&name=date"><button type="submit" class="submit"><i
                class="icon iconfont">&#xe7fc;</i></button></a>
          <div class="showfromcity">
            <ul id="fromcitylist">
            </ul>
          </div>
          <div class="showtocity">
            <ul id="tocitylist">
            </ul>
          </div>
        </form>
      </div>
    </div>
    <!-- 主容器 -->
    <div class="information-list-warpper">
      <!-- 航班信息列表容器 -->
      <div class="information-list-div w">
        <!-- 航班信息列表 -->
        <ul class="information-list">
          <!-- 单个航班信息 -->
          <li class="informations">
            <!-- 航班详细信息 -->
            <div class="flightsall">
              <!-- 左侧航班信息 -->
              <ol class="flights-list">
                <!-- 前往航班信息 -->
                <li class="from-flights-information-warpper">
                  <div class="from-flights-information">
                    <!-- 前往航空公司图标 -->
                    <div class="from-icon i"><i class="icon iconfont">&#xe62c;</i></div>
                    <!-- 前往时间 城市-->
                    <div class="section-time">
                      <div class="top">13:40 - 11:13+1</div>
                      <div class="bottom">HK - USA</div>
                    </div>
                    <!-- 经过几站 -->
                    <div class="section-stops">
                      <div class="top">3 stops <i class="icon iconfont" style="color: rgb(232,56,27);">&#xe600;</i>
                      </div>
                      <div class="bottom"></div>
                    </div>
                    <!-- 前往总时间 -->
                    <div class="section-duration">
                      <div class="top">33h 33m</div>
                      <div class="bottom"></div>
                    </div>
                  </div>
                </li>
                <br>
                <!-- 返程航班信息 -->
                <li class="to-flights-information-warpper">
                  <div class="to-flights-information">
                    <!-- 返程航空公司图标 -->
                    <div class="to-icon i"><i class="icon iconfont">&#xe62c;</i></div>
                    <!-- 返程时间 城市-->
                    <div class="section-time">
                      <div class="top">13:40 - 11:13+1</div>
                      <div class="bottom">HK - USA</div>
                    </div>
                    <!-- 经过几站 -->
                    <div class="section-stops">
                      <div class="top">3 stops <i class="icon iconfont" style="color: rgb(232,56,27)">&#xe600;</i></div>
                      <div class="bottom"></div>
                    </div>
                    <!-- 返程总时间 -->
                    <div class="section-duration">
                      <div class="top">33h 33m</div>
                      <div class="bottom"></div>
                    </div>
                  </div>
                </li>
              </ol>
              <!-- 右侧价格界面 -->
              <div class="price-warpper">
                <!-- 钱包图标 -->
                <i class="icon iconfont">&#xe60e;</i>
                <!-- 详细价格 -->
                <div class="price">HK$13.159</div>
                <!-- 订购按钮 -->
                <a href="#"><button class="view-button">Viem Deal</button></a>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</body>

</html>